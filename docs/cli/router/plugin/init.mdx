---
title: "Init"
description: "Scaffold a new gRPC router plugin"
icon: "file-circle-plus"
---
<Card title="ðŸš€ Introducing Cosmo Connect" icon="plug" href="/connect/overview">
  **New in Cosmo**: Build federated graphs with gRPC services and plugins. 
  [Learn more â†’](/connect/overview)
</Card>


# wgc router plugin init

The `init` command scaffolds a new gRPC router plugin project with all the necessary files and directory structure.

## Usage

```bash
wgc router plugin init [options] <name>
```

## Arguments

| Argument | Description        |
| -------- | ------------------ |
| `name`   | Name of the plugin |

## Options

| Option                        | Description                                                                                                            | Default                 |
| ----------------------------- | ---------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| `-p, --project <project>`     | Project name. When provided, a minimal router project is bootstrapped and the plugin is created at `<project>/<name>`. | (none)                  |
| `-d, --directory <directory>` | Directory to create the plugin or project in                                                                           | `.` (current directory) |
| `-l, --language <language>`   | Programming language to use for the plugin (currently only `go` is supported)                                          | `go`                    |

## Description

This command creates a new plugin directory with the specified name and scaffolds the basic plugin structure, including:

- A GraphQL schema file (`src/schema.graphql`)
- Go implementation files (`src/main.go`, `src/main_test.go`)
- Generated mapping and protocol files (`generated/mapping.json`, `generated/service.proto`, `generated/service.proto.lock.json`)
- Go module configuration (`go.mod`)
- Makefile and Dockerfile (`Makefile`, `Dockerfile`)
- Documentation (`README.md`)

When `--project` is provided, a minimal router project is created in the project directory with:

- Router configuration files in the project root (`config.yaml`, `graph.yaml`)
- Project-level files (`README.md`, `Makefile`, `.gitignore`)
- The plugin located at `<project>/<name>`

If you want to create a plugin in an existing project directory, omit `--project` and use `-d/--directory` to choose where the plugin directory should be created.

## Directory Structure

### With `--project`

```
my-project/
â”œâ”€â”€ README.md                 # Project documentation
â”œâ”€â”€ Makefile                  # Project Makefile
â”œâ”€â”€ config.yaml               # Router configuration
â”œâ”€â”€ graph.yaml                # Supergraph configuration
â”œâ”€â”€ .gitignore
â””â”€â”€ my-plugin/                # Your plugin directory
    â”œâ”€â”€ README.md
    â”œâ”€â”€ Makefile
    â”œâ”€â”€ go.mod
    â”œâ”€â”€ .gitignore
    â”œâ”€â”€ .cursorignore
    â”œâ”€â”€ .cursor/
    â”‚   â””â”€â”€ rules/
    â”‚       â””â”€â”€ plugin-development.mdc
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ schema.graphql
    â”‚   â”œâ”€â”€ main.go
    â”‚   â””â”€â”€ main_test.go
    â”œâ”€â”€ generated/
    â”‚   â”œâ”€â”€ mapping.json
    â”‚   â”œâ”€â”€ service.proto
    â”‚   â””â”€â”€ service.proto.lock.json
    â””â”€â”€ Dockerfile
```

### Without `--project`

The plugin is created directly under the chosen directory:

```

my-plugin/
â”œâ”€â”€ README.md
â”œâ”€â”€ Makefile
â”œâ”€â”€ go.mod
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .cursorignore
â”œâ”€â”€ .cursor/
â”‚   â””â”€â”€ rules/
â”‚       â””â”€â”€ plugin-development.mdc
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ schema.graphql
â”‚   â”œâ”€â”€ main.go
â”‚   â””â”€â”€ main_test.go
â”œâ”€â”€ generated/
â”‚   â”œâ”€â”€ mapping.json
â”‚   â”œâ”€â”€ service.proto
â”‚   â””â”€â”€ service.proto.lock.json
â””â”€â”€ Dockerfile
```

## Examples

### Basic usage

```bash
wgc router plugin init users
```

### Create a new project and plugin

```bash
wgc router plugin init users -p cosmo
```

### Specify a custom directory

```bash
wgc router plugin init users -d ./plugins
```

## Next Steps

<CardGroup>
  <Card title="Build Plugin" icon="hammer" href="/cli/router/plugin/build" horizontal/>
  <Card title="Test Plugin" icon="vial" href="/cli/router/plugin/test" horizontal/>
</CardGroup>

After initializing your plugin, you should:

1. Customize the GraphQL schema in `src/schema.graphql`
2. Generate code with `wgc router plugin generate` or `make generate`
3. Implement your resolvers in `src/main.go`
4. Implement your tests in `src/main_test.go` and run them with `make test`
5. Build your plugin with `make build` 
